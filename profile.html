<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Profile - Gamified Learning</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="site-header">
        <div class="brand">
            <span class="logo">üéì</span>
            <span data-i18n="app_title">Gamified Learning</span>
        </div>
        <nav class="nav">
            <a href="index.html" data-i18n="nav_home">Home</a>
            <a href="dashboard.html" data-i18n="nav_dashboard">Dashboard</a>
            <a href="leaderboard.html" data-i18n="nav_leaderboard">Leaderboard</a>
            <a href="teacher.html" data-i18n="nav_teacher">Teacher</a>
            <a href="lectures.html" data-i18n="nav_lectures">Lectures</a>
            <a href="profile.html" class="active" data-i18n="nav_profile">Profile</a>
            <a href="login.html" data-i18n="nav_login">Login</a>
            <a href="admin.html" data-i18n="nav_admin">Admin</a>
            <a href="spoc.html" data-i18n="nav_spoc">SPOC</a>
        </nav>
        <div class="controls">
            <select id="langSelect" aria-label="Language selector">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
            </select>
        </div>
    </header>

    <main class="container">
        <h1>Your Profile</h1>
        <section class="card" id="profileCard"></section>
        <section class="card">
            <h3>Quiz Metrics</h3>
            <div id="quizMetrics"></div>
        </section>
        <div class="quiz-actions">
            <button class="btn btn-secondary" id="logoutBtn">Log out</button>
        </div>
    </main>

    <footer class="site-footer">
        <div>¬© <span id="year"></span> <span data-i18n="app_title">Gamified Learning</span></div>
        <div class="points"><span data-i18n="label_points">Points</span>: <strong id="totalPoints">0</strong></div>
    </footer>

    <script src="assets/js/storage.js"></script>
    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
        const user = StorageAPI.getUserProfile(StorageAPI.getCurrentUser());
        const card = document.getElementById('profileCard');
        card.innerHTML = `
            <div class="analytics">
                <div class="stat"><div class="stat-label">Name</div><div class="stat-value">${user.name}</div></div>
                <div class="stat"><div class="stat-label">Role</div><div class="stat-value">${user.role}</div></div>
                <div class="stat"><div class="stat-label">Email</div><div class="stat-value">${user.email || '-'}</div></div>
                <div class="stat"><div class="stat-label">Verified</div><div class="stat-value">${user.emailVerified ? 'Yes' : 'No'}</div></div>
                <div class="stat"><div class="stat-label">Phone</div><div class="stat-value">${user.phone || '-'}</div></div>
                <div class="stat"><div class="stat-label">Grade</div><div class="stat-value">${user.currentGrade || '-'}</div></div>
                <div class="stat"><div class="stat-label">School</div><div class="stat-value">${user.school || '-'}</div></div>
                <div class="stat"><div class="stat-label">Location</div><div class="stat-value">${user.location || '-'}</div></div>
                <div class="stat"><div class="stat-label">SPOC</div><div class="stat-value">${user.spocId || '-'}</div></div>
            </div>
            <div class="badges" style="margin-top:8px;">${(user.badges||[]).map(b=>`<span class='badge'>${b}</span>`).join(' ')}</div>
        `;
        const qm = document.getElementById('quizMetrics');
        const subs = user.progress.subjects;
        qm.innerHTML = Object.keys(subs).map(k=>{
            const s = subs[k];
            return `<div class="bar-row"><span class="bar-label">${k}</span><div class="bar-track"><div class="bar-fill" style="width:${s.bestScore}%"></div></div><span class="bar-value">${s.bestScore}% | ${s.quizzesTaken} quizzes</span></div>`;
        }).join('');
        document.getElementById('logoutBtn').onclick = ()=>{ StorageAPI.logout(); alert('Logged out'); };
    </script>
</body>
</html>


